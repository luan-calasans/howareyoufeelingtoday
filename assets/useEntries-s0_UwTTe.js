import{h as o,d as y,e as i,Q as m}from"./index-sibPW-u2.js";import{o as s,s as a,n as d,k as f,u}from"./date-DeCHnAat.js";const T=["Calm","Happy","Anxious","Sad","Angry","Tired","Motivated","Excited","Grateful","Frustrated","Confused","Peaceful","Nervous","Proud","Lonely","Content","Overwhelmed"],w="Other",c=s({id:a(),date:a().regex(/^\d{4}-\d{2}-\d{2}$/),user:a(),mood:a(),moodDetail:a().optional().default(""),intensity:d().min(1).max(5),note:a(),gratitude:a().optional().default(""),prayerRequest:a().optional().default(""),createdAt:a(),updatedAt:a()}),C=s({date:a().regex(/^\d{4}-\d{2}-\d{2}$/),user:a(),mood:a().min(1,"Humor é obrigatório"),moodDetail:a().optional().default(""),intensity:d().min(1).max(5),note:a().optional().default(""),gratitude:a().optional().default(""),prayerRequest:a().optional().default("")});async function p(t={}){const e={};t.from&&(e.from=t.from),t.to&&(e.to=t.to),t.user&&(e.user=t.user);const n=await o.get("",{params:e});if(!n.ok||!n.data)throw new Error(n.error||"Failed to fetch entries");const l=n.data.map(r=>({...r,date:typeof r.date=="string"&&r.date.includes("T")?r.date.split("T")[0]:r.date,intensity:Number(r.intensity),note:String(r.note||""),moodDetail:String(r.moodDetail||""),gratitude:String(r.gratitude||""),prayerRequest:String(r.prayerRequest||"")}));return f(c).parse(l)}async function g(t){const e=await o.post("",t);if(!e.ok||!e.data)throw new Error(e.error||"Failed to create entry");const n={...e.data,date:typeof e.data.date=="string"&&e.data.date.includes("T")?e.data.date.split("T")[0]:e.data.date,intensity:Number(e.data.intensity),note:String(e.data.note||""),moodDetail:String(e.data.moodDetail||""),gratitude:String(e.data.gratitude||""),prayerRequest:String(e.data.prayerRequest||"")};return c.parse(n)}async function S(t){const e=await o.post("",{},{params:{action:"delete",id:t},includeAccessKeyInParams:!0});if(!e.ok)throw new Error(e.error||"Failed to delete entry")}function D(t={}){return y({queryKey:m.entries(t),queryFn:()=>p(t),staleTime:5*60*1e3,gcTime:10*60*1e3,refetchOnWindowFocus:!1})}function O(){const t=i();return u({mutationFn:g,onSuccess:()=>{t.invalidateQueries({queryKey:["entries"]})}})}function F(){const t=i();return u({mutationFn:S,onSuccess:()=>{t.invalidateQueries({queryKey:["entries"]})}})}export{w as C,T as M,F as a,D as b,C as c,O as u};
